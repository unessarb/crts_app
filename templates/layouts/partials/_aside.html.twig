<!-- Main Sidebar Container -->
<aside class="main-sidebar sidebar-dark-primary elevation-4">
  <!-- Brand Logo -->
  <a href="{{ path('app_home') }}" class="brand-link">
    <img src="{{ asset('/dist/img/crts.jpeg') }}" alt="CRTS Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
    <span class="brand-text font-weight-light">ArchiCRTS</span>
  </a>

  <!-- Sidebar -->
  <div class="sidebar">
    <!-- Sidebar user panel (optional) -->
    <div class="user-panel mt-3 pb-3 mb-3 w-100 text-center ">
        <a href="#" class="d-block">{{ app.user.fullname }} <br> {{ app.user.roles[0] == "ROLE_ADMIN" ? "Administrateur" : app.user.roles[0] == "ROLE_AGENT" ? "Agent" : app.user.roles[0] == "ROLE_REGIE" ? "Agent" : "Utilisateur" }}</a>
    </div>

    {# <!-- SidebarSearch Form -->
    <div class="form-inline mt-3">
      <div class="input-group" data-widget="sidebar-search">
        <input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
        <div class="input-group-append">
          <button class="btn btn-sidebar">
            <i class="fas fa-search fa-fw"></i>
          </button>
        </div>
      </div>
    </div> #}

    <!-- Sidebar Menu -->
    <nav class="mt-2">
      <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
        <!-- Add icons to the links using the .nav-icon class
            with font-awesome or any other icon font library -->
        <li class="nav-item">
          <a href="{{ path('app_home') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_home' %}active{% endif %}">
            <i class="nav-icon fas fa-tachometer-alt"></i>
            <p>
              Tableau de bord
            </p>
          </a>
        </li>
        {% if not is_granted('ROLE_REGIE') %}
        <li class="nav-item">
          <a href="{{ path('app_marches') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_marches' or app.request.attributes.get('_route') == 'app_new_marches' or app.request.attributes.get('_route') == 'app_edit_marches' or app.request.attributes.get('_route') == 'app_show_marches' %}active{% endif %}">
            <i class="far fa-folder-open nav-icon"></i>
            <p>Marchés Unique / Cadre</p>
          </a>
        </li>
       
        <li class="nav-item">
          <a href="{{ path('app_bon_commandes') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_bon_commandes' or app.request.attributes.get('_route') == 'app_new_bon_commande' or app.request.attributes.get('_route') == 'app_edit_bon_commande' or app.request.attributes.get('_route') == 'app_show_bon_commande' %}active{% endif %}">
            <i class="far fa-folder-open nav-icon"></i>
            <p>Bon de commandes</p>
          </a>
        </li>
        <li class="nav-item">
          <a href="{{ path('app_contrats') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_contrats' or app.request.attributes.get('_route') == 'app_new_contrat' or app.request.attributes.get('_route') == 'app_edit_contrat' or app.request.attributes.get('_route') == 'app_show_contrat' %}active{% endif %}">
            <i class="far fa-folder-open nav-icon"></i>
            <p>Contrat / Convention</p>
          </a>
        </li>
        {% else %}
         <li class="nav-item">
          <a href="{{ path('recette_index') }}" class="nav-link {% if app.request.attributes.get('_route') == 'recette_index' or app.request.attributes.get('_route') == 'recette_new' or app.request.attributes.get('_route') == 'recette_edit' or app.request.attributes.get('_route') == 'recette_show' %}active{% endif %}">
            <i class="far fa-folder-open nav-icon"></i>
            <p>Recettes</p>
          </a>
        </li>
        <li class="nav-item">
          <a href="{{ path('app_depenses') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_depenses' or app.request.attributes.get('_route') == 'app_new_depense' or app.request.attributes.get('_route') == 'app_edit_depense' or app.request.attributes.get('_route') == 'app_show_depense' %}active{% endif %}">
            <i class="far fa-folder-open nav-icon"></i>
            <p>Depenses</p>
          </a>
        </li>
        <li class="nav-item">
              <a href="{{ path('app_personnels') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_personnels' or app.request.attributes.get('_route') == 'app_new_personnels' or app.request.attributes.get('_route') == 'app_edit_personnels' %}active{% endif %}">
                <i class="fas fa-users"></i>
                <p>MAJ Bénéficiaires</p>
              </a>
            </li>

              <li class="nav-item">
              <a href="{{ path('nature_recette_index') }}" class="nav-link {% if app.request.attributes.get('_route') == 'nature_recette_index' or app.request.attributes.get('_route') == 'nature_recette_new' or app.request.attributes.get('_route') == 'nature_recette_edit' %}active{% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>MAJ Nature Recette</p>
              </a>
            </li>

            <li class="nav-item">
                    <a href="{{ path('app_nature_operation_depense') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_nature_operation_depense' or app.request.attributes.get('_route') == 'app_new_nature_operation_depense' or app.request.attributes.get('_route') == 'app_edit_nature_operation_depense' %}active{% endif %}">
                      <i class="far fa-dot-circle nav-icon"></i>
                      <p>MAJ Rubrique</p>
                    </a>
            </li>
        {% endif %}

        {% if is_granted('ROLE_ADMIN') %}
        <li class="nav-item {% if 
                  app.request.attributes.get('_route') == 'app_nature_operation_marche_unique' or 
                  app.request.attributes.get('_route') == 'app_new_nature_operation_marche_unique' or 
                  app.request.attributes.get('_route') == 'app_edit_nature_operation_marche_unique' or 
                  app.request.attributes.get('_route') == 'app_nature_operation_marche_reconductible' or 
                  app.request.attributes.get('_route') == 'app_new_nature_operation_marche_reconductible' or 
                  app.request.attributes.get('_route') == 'app_edit_nature_operation_marche_reconductible' or
                  app.request.attributes.get('_route') == 'app_nature_operation_contrat' or 
                  app.request.attributes.get('_route') == 'app_new_nature_operation_contrat' or 
                  app.request.attributes.get('_route') == 'app_edit_nature_operation_contrat' or
                  app.request.attributes.get('_route') == 'app_nature_operation_depense' or 
                  app.request.attributes.get('_route') == 'app_new_nature_operation_depense' or 
                  app.request.attributes.get('_route') == 'app_edit_nature_operation_depense' or
                  app.request.attributes.get('_route') == 'app_nature_operation_bon_commande' or 
                  app.request.attributes.get('_route') == 'app_new_nature_operation_bon_commande' or 
                  app.request.attributes.get('_route') == 'app_edit_nature_operation_bon_commande' or
                  app.request.attributes.get('_route') == 'app_societes' or app.request.attributes.get('_route') == 'app_new_societes' or app.request.attributes.get('_route') == 'app_edit_societes' or
                  app.request.attributes.get('_route') == 'app_titulaires' or app.request.attributes.get('_route') == 'app_new_titulaires' or app.request.attributes.get('_route') == 'app_edit_titulaires' or
                  app.request.attributes.get('_route') == 'app_devises' or app.request.attributes.get('_route') == 'app_new_devises' or app.request.attributes.get('_route') == 'app_edit_devises' or
                  app.request.attributes.get('_route') == 'app_tfs' or app.request.attributes.get('_route') == 'app_new_tfs' or app.request.attributes.get('_route') == 'app_edit_tfs' or
                  app.request.attributes.get('_route') == 'ligne_budgetaire_index' or app.request.attributes.get('_route') == 'ligne_budgetaire_new' or app.request.attributes.get('_route') == 'ligne_budgetaire_edit'
                   %}menu-is-opening menu-open
            {% endif %}">
          <a href="#" class="nav-link">
            <i class="nav-icon fas fa-lock"></i>
            <p>
              Administration
              <i class="right fas fa-angle-left"></i>
            </p>
          </a>
          <ul class="nav nav-treeview">

            <li class="nav-item">
              <a href="{{ path('app_societes') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_societes' or app.request.attributes.get('_route') == 'app_new_societes' or app.request.attributes.get('_route') == 'app_edit_societes' %}active{% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>MAJ Sociétés</p>
              </a>
            </li>

            <li class="nav-item">
              <a href="{{ path('app_titulaires') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_titulaires' or app.request.attributes.get('_route') == 'app_new_titulaires' or app.request.attributes.get('_route') == 'app_edit_titulaires' %}active{% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>MAJ Sté Titulaires</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="{{ path('app_devises') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_devises' or app.request.attributes.get('_route') == 'app_new_devises' or app.request.attributes.get('_route') == 'app_edit_devises' %}active{% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>MAJ Devises</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="{{ path('app_tfs') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_tfs' or app.request.attributes.get('_route') == 'app_new_tfs' or app.request.attributes.get('_route') == 'app_edit_tfs' %}active{% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>MAJ TFS</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="{{ path('ligne_budgetaire_index') }}" class="nav-link {% if app.request.attributes.get('_route') == 'ligne_budgetaire_index' or app.request.attributes.get('_route') == 'ligne_budgetaire_new' or app.request.attributes.get('_route') == 'ligne_budgetaire_edit' %}active{% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>MAJ Lignes</p>
              </a>
            </li>
            <li class="nav-item 
            {% if 
                  app.request.attributes.get('_route') == 'app_nature_operation_marche_unique' or 
                  app.request.attributes.get('_route') == 'app_new_nature_operation_marche_unique' or 
                  app.request.attributes.get('_route') == 'app_edit_nature_operation_marche_unique' or 
                  app.request.attributes.get('_route') == 'app_nature_operation_marche_reconductible' or 
                  app.request.attributes.get('_route') == 'app_new_nature_operation_marche_reconductible' or 
                  app.request.attributes.get('_route') == 'app_edit_nature_operation_marche_reconductible' or
                  app.request.attributes.get('_route') == 'app_nature_operation_contrat' or 
                  app.request.attributes.get('_route') == 'app_new_nature_operation_contrat' or 
                  app.request.attributes.get('_route') == 'app_edit_nature_operation_contrat' or
                  app.request.attributes.get('_route') == 'app_nature_operation_depense' or 
                  app.request.attributes.get('_route') == 'app_new_nature_operation_depense' or 
                  app.request.attributes.get('_route') == 'app_edit_nature_operation_depense' or
                  app.request.attributes.get('_route') == 'app_nature_operation_bon_commande' or 
                  app.request.attributes.get('_route') == 'app_new_nature_operation_bon_commande' or 
                  app.request.attributes.get('_route') == 'app_edit_nature_operation_bon_commande'
                   %}menu-is-opening menu-open
            {% endif %}
            ">
                <a href="#" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>
                    Nature opération
                    <i class="right fas fa-angle-left"></i>
                  </p>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item">
                    <a href="{{ path('app_nature_operation_marche_unique') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_nature_operation_marche_unique' or app.request.attributes.get('_route') == 'app_new_nature_operation_marche_unique' or app.request.attributes.get('_route') == 'app_edit_nature_operation_marche_unique' %}active{% endif %}">
                      <i class="far fa-dot-circle nav-icon"></i>
                      <p>Marché Unique / Cadre</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="{{ path('app_nature_operation_marche_reconductible') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_nature_operation_marche_reconductible' or app.request.attributes.get('_route') == 'app_new_nature_operation_marche_reconductible' or app.request.attributes.get('_route') == 'app_edit_nature_operation_marche_reconductible' %}active{% endif %}">
                      <i class="far fa-dot-circle nav-icon"></i>
                      <p>Marché Reconductible</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="{{ path('app_nature_operation_contrat') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_nature_operation_contrat' or app.request.attributes.get('_route') == 'app_new_nature_operation_contrat' or app.request.attributes.get('_route') == 'app_edit_nature_operation_contrat' %}active{% endif %}">
                      <i class="far fa-dot-circle nav-icon"></i>
                      <p>Contrat</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="{{ path('app_nature_operation_bon_commande') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_nature_operation_bon_commande' or app.request.attributes.get('_route') == 'app_new_nature_operation_bon_commande' or app.request.attributes.get('_route') == 'app_edit_nature_operation_bon_commande' %}active{% endif %}">
                      <i class="far fa-dot-circle nav-icon"></i>
                      <p>Bon commande</p>
                    </a>
                  </li>
                  {# <li class="nav-item">
                    <a href="{{ path('app_nature_operation_depense') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_nature_operation_depense' or app.request.attributes.get('_route') == 'app_new_nature_operation_depense' or app.request.attributes.get('_route') == 'app_edit_nature_operation_depense' %}active{% endif %}">
                      <i class="far fa-dot-circle nav-icon"></i>
                      <p>Dépense</p>
                    </a>
                  </li> #}
                </ul>
              </li>
            
          </ul>
        </li>

        <li class="nav-item 
            {% if app.request.attributes.get('_route') == 'app_admins' or app.request.attributes.get('_route') == 'app_new_admin' or app.request.attributes.get('_route') == 'app_edit_admin' or
                  app.request.attributes.get('_route') == 'app_agents' or app.request.attributes.get('_route') == 'app_new_agent' or app.request.attributes.get('_route') == 'app_edit_agent' or
                  app.request.attributes.get('_route') == 'app_regies' or app.request.attributes.get('_route') == 'app_new_regie' or app.request.attributes.get('_route') == 'app_edit_regie' or
                  app.request.attributes.get('_route') == 'app_users' or app.request.attributes.get('_route') == 'app_new_user' or app.request.attributes.get('_route') == 'app_edit_user'
            %}
            menu-is-opening menu-open
            {% endif %}">
          <a href="#" class="nav-link">
            <i class="nav-icon fas fa-users"></i>
            <p>
              Gestion utilisateur
              <i class="right fas fa-angle-left"></i>
            </p>
          </a>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              <a href="{{ path('app_admins') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_admins' or app.request.attributes.get('_route') == 'app_new_admin' or app.request.attributes.get('_route') == 'app_edit_admin' %}active{% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Administrateurs</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="{{ path('app_agents') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_agents' or app.request.attributes.get('_route') == 'app_new_agent' or app.request.attributes.get('_route') == 'app_edit_agent' %}active{% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Agents</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="{{ path('app_regies') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_regies' or app.request.attributes.get('_route') == 'app_new_regie' or app.request.attributes.get('_route') == 'app_edit_regie' %}active{% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Regies</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="{{ path('app_users') }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_users' or app.request.attributes.get('_route') == 'app_new_user' or app.request.attributes.get('_route') == 'app_edit_user' %}active{% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Utilisateurs</p>
              </a>
            </li>
           </ul>
        </li>
        {% endif %}
        <li class="nav-item">
          <a href="{{ path('app_profil',{id : app.user.id}) }}" class="nav-link {% if app.request.attributes.get('_route') == 'app_profil' %}active{% endif %}">
            <i class="nav-icon fas fa-user"></i>
            <p>
              Edit Profile
            </p>
          </a>
        </li>
        
      </ul>
    </nav>
    <!-- /.sidebar-menu -->
  </div>
  <!-- /.sidebar -->
</aside>